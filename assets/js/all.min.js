$(document).on("ready",function(e){var n='<i class="fa fa-check"></i>',t='<i class="fa fa-circle-o"></i>',r=$("#mega-teamspeak-bounder-input-nickname"),o=$("#mega-teamspeak-bounder-input-pincode"),a=$("#mega-teamspeak-bounder-nickname-btn"),i=$("#mega-teamspeak-bounder-pincode-btn"),s=$("#mega-teamspeak-bounder-input-nickname-notify"),l=$("#mega-teamspeak-bounder-show-btn");$("form.no-submit").on("submit",function(e){e.preventDefault()}),$.get(RELATIVE_PATH+"/mega/teamspeak/bounder/uid/"+app.user.uid,{},function(e){"false"!=e&&$("#mega-teamspeak-bounder-cldbids").html(e)}),l.on("click",function(e){e.preventDefault(),$(this).attr("disabled",true),a.closest(".form-horizontal").slideDown("fast")}),a.on("click",function(e){e.preventDefault();var t={};t.nickname=r.val(),socket.emit("modules.bounder",t,function(e,t){return t.err?app.alertError(t.err):(r.attr("disabled",true),a.closest(".form-actions").addClass("hidden"),s.html(n).parent().removeClass("alert-danger").addClass("alert-success"),void o.closest(".form-horizontal").slideDown("fast"))})}),i.on("click",function(e){e.preventDefault();var n={};n.pincode=o.val().trim(),socket.emit("modules.bounder",n,function(e,n){return n.err?app.alertError(n.err):(n.msg&&app.alert({type:"success",title:"Успех",timeout:5e3,message:n.msg,clickfn:function(){}}),r.val(""),o.val(""),r.attr("disabled",false),a.closest(".form-actions").removeClass("hidden"),a.closest(".form-horizontal").fadeOut("slow"),s.html(t).parent().removeClass("alert-danger alert-success"),o.closest(".form-horizontal").fadeOut("slow"),l.attr("disabled",false),void $.get(RELATIVE_PATH+"/mega/teamspeak/bounder/uid/"+app.user.uid,{},function(e){if("false"!=e){$("#mega-teamspeak-bounder-cldbids").html(e);var n=$(".sidebar-area__open-options");0<n.length&&!n.hasClass("--pressed")&&(n.addClass("--pressed"),$("#sidebar-area__options").finish().slideDown({duration:300}).animate({"background-color":"#FFF"},{duration:500}))}}))})})}),$(document).ready(function(){methods.reload.online(),methods.reload.teamspeak(),$(document).on("click","div.ts-client[data-userlink]",function(e){e.preventDefault(),$(this).attr("data-userlink")&&ajaxify.go($(this).attr("data-userlink"))})});var methods={reload:{}};methods.reload.online=function(){$.get(document.location.origin+"/mega/online/builder",{},function(e){$("#mega-online").html(e)})},methods.reload.teamspeak=function(){$.get(document.location.origin+"/mega/teamspeak/builder",{},function(e){$("#mega-teamspeak").html(e).find(".ts-client").each(function(e,n){methods.resizeClientHeader(n)})})},methods.resizeClientHeader=function(e){return $(e)},$.fn.extend({resizeClientHeader:methods.resizeClientHeader}),$(document).ready(function(){socket.on("mega:teamspeak.reload",function(e){methods.reload.teamspeak()}),socket.on("mega:online.reload",function(e){methods.reload.online()}),socket.on("mega:teamspeak.events",function(e){if(("online"===e.key||"offline"===e.key)&&methods.reload.online(),"online"!==e.key)if("offline"!==e.key){if("update"===e.key){var n=$("#ts-client-"+e.clid),t=$(e.body),r=n.closest(".ts-channel-clients").attr("id");return r=parseInt(r.substr(r.lastIndexOf("-")+1),10),r===e.cid?(n.replaceWith(t),void t.resizeClientHeader()):void n.hide("medium",function(){t.animate({backgroundColor:"#59A8C2"},0),n.appendTo("#ts-channel-clients-"+e.cid).replaceWith(t),t.css("visibility","hidden").hide().show("medium",function(){$(this).resizeClientHeader()}).css("visibility","").animate({backgroundColor:""},1e3,function(){$(this).css("backgroundColor","")})})}}else{$("#ts-client-"+e.clid).animate({backgroundColor:"#FF7977"},47).addClass("animated fadeOutLeft").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).hide("medium",function(){this.remove()})})}else{$(e.body).hide().css("visibility","hidden").animate({backgroundColor:"#86ba4b"},0).appendTo("#ts-channel-clients-"+e.cid).show("slow",function(){$(this).resizeClientHeader()}).addClass("slideRight").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).css("visibility","").removeClass("slideRight").animate({backgroundColor:""},1e3,function(){$(this).css("backgroundColor","")})})}})}),function(e,n){var t,r=e.jQuery||e.Cowboy||(e.Cowboy={});r.throttle=t=function(e,t,o,a){function i(){function r(){l=+new Date,o.apply(u,c)}function i(){s=n}var u=this,d=+new Date-l,c=arguments;a&&!s&&r(),s&&clearTimeout(s),a===n&&d>e?r():true!==t&&(s=setTimeout(a?i:r,a===n?e-d:e))}var s,l=0;return"boolean"!=typeof t&&(a=o,o=t,t=n),r.guid&&(i.guid=o.guid=o.guid||r.guid++),i},r.debounce=function(e,r,o){return o===n?t(e,r,false):t(e,o,false!==r)}}(this),function(e,n){function t(e,n,t){var r=c[n.type]||{};return null==e?t||!n.def?null:n.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?n.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function r(n){var t=u(),r=t._rgba=[];return n=n.toLowerCase(),m(l,function(e,o){var a,i=o.re.exec(n),s=i&&o.parse(i),l=o.space||"rgba";return s?(a=t[l](s),t[d[l].cache]=a[d[l].cache],r=t._rgba=a._rgba,!1):void 0}),r.length?("0,0,0,0"===r.join()&&e.extend(r,a.transparent),t):a[n]}function o(e,n,t){return t=(t+1)%1,1>6*t?e+(n-e)*t*6:1>2*t?n:2>3*t?e+(n-e)*(2/3-t)*6:e}var a,i="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=e.Color=function(n,t,r,o){return new e.Color.fn.parse(n,t,r,o)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=u.support={},p=e("<p>")[0],m=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=p.style.backgroundColor.indexOf("rgba")>-1,m(d,function(e,n){n.cache="_"+e,n.props.alpha={idx:3,type:"percent",def:1}}),u.fn=e.extend(u.prototype,{parse:function(o,i,s,l){if(o===n)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(i),i=n);var c=this,f=e.type(o),p=this._rgba=[];return i!==n&&(o=[o,i,s,l],f="array"),"string"===f?this.parse(r(o)||a._default):"array"===f?(m(d.rgba.props,function(e,n){p[n.idx]=t(o[n.idx],n)}),this):"object"===f?(o instanceof u?m(d,function(e,n){o[n.cache]&&(c[n.cache]=o[n.cache].slice())}):m(d,function(n,r){var a=r.cache;m(r.props,function(e,n){if(!c[a]&&r.to){if("alpha"===e||null==o[e])return;c[a]=r.to(c._rgba)}c[a][n.idx]=t(o[e],n,!0)}),c[a]&&e.inArray(null,c[a].slice(0,3))<0&&(c[a][3]=1,r.from&&(c._rgba=r.from(c[a])))}),this):void 0},is:function(e){var n=u(e),t=!0,r=this;return m(d,function(e,o){var a,i=n[o.cache];return i&&(a=r[o.cache]||o.to&&o.to(r._rgba)||[],m(o.props,function(e,n){return null!=i[n.idx]?t=i[n.idx]===a[n.idx]:void 0})),t}),t},_space:function(){var e=[],n=this;return m(d,function(t,r){n[r.cache]&&e.push(t)}),e.pop()},transition:function(e,n){var r=u(e),o=r._space(),a=d[o],i=0===this.alpha()?u("transparent"):this,s=i[a.cache]||a.to(i._rgba),l=s.slice();return r=r[a.cache],m(a.props,function(e,o){var a=o.idx,i=s[a],u=r[a],d=c[o.type]||{};null!==u&&(null===i?l[a]=u:(d.mod&&(u-i>d.mod/2?i+=d.mod:i-u>d.mod/2&&(i-=d.mod)),l[a]=t((u-i)*n+i,o)))}),this[o](l)},blend:function(n){if(1===this._rgba[3])return this;var t=this._rgba.slice(),r=t.pop(),o=u(n)._rgba;return u(e.map(t,function(e,n){return(1-r)*o[n]+r*e}))},toRgbaString:function(){var n="rgba(",t=e.map(this._rgba,function(e,n){return null==e?n>2?1:0:e});return 1===t[3]&&(t.pop(),n="rgb("),n+t.join()+")"},toHslaString:function(){var n="hsla(",t=e.map(this.hsla(),function(e,n){return null==e&&(e=n>2?1:0),n&&3>n&&(e=Math.round(100*e)+"%"),e});return 1===t[3]&&(t.pop(),n="hsl("),n+t.join()+")"},toHexString:function(n){var t=this._rgba.slice(),r=t.pop();return n&&t.push(~~(255*r)),"#"+e.map(t,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var n,t,r=e[0]/255,o=e[1]/255,a=e[2]/255,i=e[3],s=Math.max(r,o,a),l=Math.min(r,o,a),u=s-l,d=s+l,c=.5*d;return n=l===s?0:r===s?60*(o-a)/u+360:o===s?60*(a-r)/u+120:60*(r-o)/u+240,t=0===u?0:.5>=c?u/d:u/(2-d),[Math.round(n)%360,t,c,null==i?1:i]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var n=e[0]/360,t=e[1],r=e[2],a=e[3],i=.5>=r?r*(1+t):r+t-r*t,s=2*r-i;return[Math.round(255*o(s,i,n+1/3)),Math.round(255*o(s,i,n)),Math.round(255*o(s,i,n-1/3)),a]},m(d,function(r,o){var a=o.props,i=o.cache,l=o.to,d=o.from;u.fn[r]=function(r){if(l&&!this[i]&&(this[i]=l(this._rgba)),r===n)return this[i].slice();var o,s=e.type(r),c="array"===s||"object"===s?r:arguments,f=this[i].slice();return m(a,function(e,n){var r=c["object"===s?e:n.idx];null==r&&(r=f[n.idx]),f[n.idx]=t(r,n)}),d?(o=u(d(f)),o[i]=f,o):u(f)},m(a,function(n,t){u.fn[n]||(u.fn[n]=function(o){var a,i=e.type(o),l="alpha"===n?this._hsla?"hsla":"rgba":r,u=this[l](),d=u[t.idx];return"undefined"===i?d:("function"===i&&(o=o.call(this,d),i=e.type(o)),null==o&&t.empty?this:("string"===i&&(a=s.exec(o),a&&(o=d+parseFloat(a[2])*("+"===a[1]?1:-1))),u[t.idx]=o,this[l](u)))})})}),u.hook=function(n){var t=n.split(" ");m(t,function(n,t){e.cssHooks[t]={set:function(n,o){var a,i,s="";if("transparent"!==o&&("string"!==e.type(o)||(a=r(o)))){if(o=u(a||o),!f.rgba&&1!==o._rgba[3]){for(i="backgroundColor"===t?n.parentNode:n;(""===s||"transparent"===s)&&i&&i.style;)try{s=e.css(i,"backgroundColor"),i=i.parentNode}catch(l){}o=o.blend(s&&"transparent"!==s?s:"_default")}o=o.toRgbaString()}try{n.style[t]=o}catch(l){}}},e.fx.step[t]=function(n){n.colorInit||(n.start=u(n.elem,t),n.end=u(n.end),n.colorInit=!0),e.cssHooks[t].set(n.elem,n.start.transition(n.end,n.pos))}})},u.hook(i),e.cssHooks.borderColor={expand:function(e){var n={};return m(["Top","Right","Bottom","Left"],function(t,r){n["border"+r+"Color"]=e}),n}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery);